<% if has_comment? -%>
<%= comment -%>

<% end -%>
Name:          <%= adopted_name %>
<% if has_epoch? -%>
Epoch:         <%= epoch %>
<% end -%>
Version:       <%= version %>
Release:       <%= release %>
<% summaries.each_pair do |cp, summary| -%>
Summary<%= !cp.blank? && "(#{cp})" || nil %>:       <%= summary %>
<% end -%>
License:       <%= licenses.join(" or ") %>
Group:         <%= group %>
Url:           <%= uri %>
Vcs:           <%= vcs %>
<% if !has_packager? -%>
Packager:      <%= packager %>
<% end -%>
<% if !has_any_compilable? -%>
BuildArch:     noarch
<% end -%>

<% source_files.each_pair do |index, source_file| -%>
Source<%= index != :"0" && index || nil %>:        <%= source_file %>
<% end -%>
<% patches.each_pair do |index, patch| -%>
Patch<%= index != :"0" && index || nil %>:         <%= patch %>
<% end -%>
<% build_pre_requires.each_pair do |_, dep| -%>
BuildRequires(pre): <%= dep %>
<% end -%>
<% build_requires.each_pair do |_, dep| -%>
BuildRequires: <%= dep %>
<% end -%>

%add_findreq_skiplist %ruby_gemslibdir/**/*
%add_findprov_skiplist %ruby_gemslibdir/**/*
<% requires.each do |_, dep| -%>
Requires:            <%= dep %>
<% end -%>
<% obsoletes.each do |_, dep| -%>
Obsoletes:           <%= dep %>
<% end -%>
<% provides.each do |_, dep| -%>
Provides:            <%= dep %>
<% end -%>
<% conflicts.each do |_, dep| -%>
Conflicts:           <%= dep %>
<% end -%>

<% descriptions.each_pair do |arg, description| -%>
%description<%= !arg.blank? && "         -l #{arg}" || nil %>
<%= description %>
<% end -%>


<% if has_executable? -%>
%package       -n <%= executable_name %>
Summary:       Executable file for <%= name %> gem
Summary(ru_RU.UTF-8): Исполнямка для самоцвета <%= name %>
Group:         Development/Ruby
BuildArch:     noarch

%description   -n <%= executable_name %>
Executable file for <%= name %> gem.

%description   -n <%= executable_name %> -l ru_RU.UTF8
Исполнямка для самоцвета <%= name %>.


<% end -%>
<% if has_doc? -%>
%package       doc
Summary:       Documentation files for <%= name %> gem
Summary(ru_RU.UTF-8): Файлы сведений для самоцвета <%= name %>
Group:         Development/Documentation
BuildArch:     noarch

%description   doc
Documentation files for <%= name %> gem.

%description   doc -l ru_RU.UTF8
Файлы сведений для самоцвета <%= name %>.
<% end -%>


<% if has_devel? -%>
%package       devel
Summary:       Development files for <%= name %> gem
Group:         Development/Ruby
BuildArch:     noarch

<% devel_deps.each do |dep| -%>
Requires:      <%= dep %>
<% end -%>

%description   devel
Development files for <%= name %> gem.

%description   devel -l ru_RU.UTF8
Файлы заголовков для самоцвета <%= name %>.


<% end -%>
<% secondaries.each do |secondary| -%>
<% if secondary.has_executable? -%>
%package       -n <%= secondary.executable_name %>
Summary:       Executable file for <%= secondary.name %> gem
Summary(ru_RU.UTF-8): Исполнямка для самоцвета <%= secondary.name %>
Group:         Development/Ruby
BuildArch:     noarch

%description   -n <%= secondary.executable_name %>
Executable file for <%= secondary.name %> gem.

%description   -n <%= secondary.executable_name %> -l ru_RU.UTF8
Исполнямка для <%= secondary.name %> самоцвета.


<% end -%>
<% if secondary.has_doc? -%>
%package       -n <%= secondary.adopted_name %>-doc
Summary:       Documentation files for <%= secondary.name %> gem
Summary(ru_RU.UTF-8): Файлы сведений для самоцвета <%= secondary.name %>
Group:         Development/Documentation
BuildArch:     noarch

%description   -n <%= secondary.adopted_name %>-doc
Documentation files for <%= secondary.name %> gem.

%description   -n <%= secondary.adopted_name %>-doc -l ru_RU.UTF8
Файлы сведений для самоцвета <%= secondary.name %>.


<% end -%>
<% if secondary.has_devel? -%>
%package       -n <%= secondary.adopted_name %>-devel
Summary:       Development files for <%= secondary.name %> gem
Group:         Development/Ruby
BuildArch:     noarch

<% if !secondary.devel_deps.empty? -%>
<% secondary.devel_deps.each_pair do |_, dep| -%>
Requires:      <%= dep %>
<% end -%>

<% end -%>
%description   -n <%= secondary.adopted_name %>-devel
Development files for <%= secondary.name %> gem.

%description   -n <%= secondary.adopted_name %>-devel -l ru_RU.UTF8
Файлы заголовков для самоцвета <%= secondary.name %>.


<% end -%>
<% end -%>
%prep
%setup

%build
%ruby_build

%install
%ruby_install

%check
%ruby_test

%files
<% if has_readme? -%>
%doc <%= readme %>
<% end -%>
%ruby_gemspec
%ruby_gemlibdir
<% if has_compilable? -%>
%ruby_gemextdir
<% end -%>

<% secondaries.each do |secondary| -%>
<% if secondary.has_readme? -%>
%files         -n <%= secondary.adopted_name %>
<% end -%>
%doc <%= secondary.readme %>
%ruby_gemspecdir/<%= secondary.name %>-<%= secondary.version %>.gemspec
%ruby_gemslibdir/<%= secondary.name %>-<%= secondary.version %>
<% if secondary.has_compilable? -%>
%ruby_gemsextdir/<%= secondary.name %>-<%= secondary.version %>

<% end -%>
<% if secondary.has_executable? -%>
%files         -n <%= secondary.executable_name %>
<% secondary.executables.each do |e| -%>
%_bindir/<%= e %>
<% end -%>

<% end -%>
<% if secondary.has_doc? -%>
%files         -n <%= secondary.adopted_name %>-doc
%ruby_gemsdocdir/<%= secondary.name %>-<%= secondary.version %>

<% end -%>
<% if secondary.has_devel? -%>
%files         -n <%= secondary.adopted_name %>-devel
<% if secondary.has_devel_sources? -%>
%ruby_includedir/*
<% end -%>
<% end -%>

<% end -%>

%changelog
<% changes.reverse.each do |c| -%>
* <%= c.date %> <%= c.author %> <%= c.email && "<#{c.email}>" || "" %> <%= [ c.version, c.release ].compact.join("-") %>
<%= c.description %>

<% end -%>
