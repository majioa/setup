<%= comment -%>
<% if has_altname? %>
%define        pkgname <%= altname %>
<% if altname != name %>
%define        gemname <%= name %>
<% end -%>

<% end -%>
Name:          <%= name %>
Epoch:         <%= epoch %>
Version:       <%= version %>
Release:       <%= release %>
Summary:       <%= summary %>
License:       <%= licenses.join(" or ") %>
Group:         <%= group %>
Url:           <%= uri %>
Vcs:           <%= vcs %>
Packager:      <%= packager %>
<% if !has_compilable? -%>
BuildArch:     noarch<% end -%>

<% source_files.each do |index, source_file| -%>
Source<%= index != 0 && index || nil %>:              <%= source_file %>
<% end -%>
<% patches.each do |index, patch| -%>
Patch<%= index != 0 && index || nil %>:               <%= patch %>
<% end -%>

<% build_pre_requires.each do |_, dep| -%>
BuildRequires(pre):  <%= dep %>
<% end -%>
<% build_requires.each do |_, dep| -%>
BuildRequires:       <%= dep %>
<% end -%>

%add_findreq_skiplist %ruby_gemslibdir/**/*
%add_findprov_skiplist %ruby_gemslibdir/**/*
<% requires.each do |_, dep| -%>
Requires:            <%= dep %>
<% end -%>
<% obsoletes.each do |_, dep| -%>
Obsoletes:           <%= dep %>
<% end -%>
<% provides.each do |_, dep| -%>
Provides:            <%= dep %>
<% end -%>
<% conflicts.each do |_, dep| -%>
Conflicts:           <%= dep %>
<% end -%>

<% descriptions.each do |arg, description| -%>
%description<%= arg && "         #{arg}" || nil %>
<%= description %>
<% end -%>

<% if has_altname? -%>
<% if has_executable? -%>
%package       -n %pkgname
Summary:       Executable file for %gemname gem
Summary(ru_RU.UTF-8): Исполнямка для самоцвета %gemname
Group:         Development/Ruby
BuildArch:     noarch

%description   -n %pkgname
Executable file for %gemname gem.

%description   -n %pkgname -l ru_RU.UTF8
Исполнямка для %gemname самоцвета.


<% end -%>
<% if has_doc? -%>
%package       doc
Summary:       Documentation files for %gemname gem
Summary(ru_RU.UTF-8): Файлы сведений для самоцвета %gemname
Group:         Development/Documentation
BuildArch:     noarch

%description   doc
Documentation files for %gemname gem.

%description   doc -l ru_RU.UTF8
Файлы сведений для самоцвета %gemname.<% end -%>


<% if has_devel? -%>
%package       devel
Summary:       Development files for %gemname gem
Group:         Development/Ruby
BuildArch:     noarch

<% devel_deps.each do |dep| -%>
Requires:      gem(<%= dep.name %>) <%= dep.version %>
<% end -%>

%description   devel
Development files for %gemname gem.

%description   devel -l ru_RU.UTF8
Файлы заголовков для самоцвета %gemname.


<% end -%>
<% end -%>
<% secondaries.each do |secondary| -%>
<% if secondary.has_executable? -%>
%package       -n %pkgname
Summary:       Executable file for %gemname gem
Summary(ru_RU.UTF-8): Исполнямка для самоцвета %gemname
Group:         Development/Ruby
BuildArch:     noarch

%description   -n %pkgname
Executable file for %gemname gem.

%description   -n %pkgname -l ru_RU.UTF8
Исполнямка для %gemname самоцвета.


<% end -%>
<% if secondary.has_doc? -%>
%package       doc
Summary:       Documentation files for %gemname gem
Summary(ru_RU.UTF-8): Файлы сведений для самоцвета %gemname
Group:         Development/Documentation
BuildArch:     noarch

%description   doc
Documentation files for %gemname gem.

%description   doc -l ru_RU.UTF8
Файлы сведений для самоцвета %gemname.


<% end -%>
<% if secondary.has_devel? -%>
%package       devel
Summary:       Development files for %gemname gem
Group:         Development/Ruby
BuildArch:     noarch

<% secondary.devel_deps.each do |dep| -%>
Requires:      gem(<%= dep.name %>) <%= dep.version %>
<% end -%>

%description   devel
Development files for %gemname gem.

%description   devel -l ru_RU.UTF8
Файлы заголовков для самоцвета %gemname.


<% end -%>
<% end -%>
%prep
%setup

%build
%ruby_build

%install
%ruby_install

%check
%ruby_test

%files
%doc <%= readme %>*
%ruby_gemspec
%ruby_gemlibdir
<% if has_compilable? -%>
%ruby_gemextdir

<% end -%>
<% if has_executable? -%>
%files         -n %pkgname
<% executables.each do |e| -%>
%_bindir/<%= e %>
<% end -%>

<% end -%>
<% if has_doc? -%>
%files         doc
%ruby_gemdocdir

<% end -%>
<% if has_devel_sources? -%>
%files         devel
%ruby_includedir/*

<% end -%>

%changelog
<% changes.reverse.each do |c| -%>
* <%= c.date %> <%= c.author %> <%= c.email && "<#{c.email}>" || "" %> <%= [ c.version, c.release ].compact.join("-") %>
<%= c.description %>

<% end -%>
